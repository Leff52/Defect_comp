#  Defect Manager

**–°–∏—Å—Ç–µ–º–∞ –ö–æ–Ω—Ç—Ä–æ–ª—è** ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ—Ñ–µ–∫—Ç–∞–º–∏ (–æ—à–∏–±–∫–∞–º–∏, –∑–∞—è–≤–∫–∞–º–∏ –∏ –∑–∞–¥–∞—á–∞–º–∏) –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π.  
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –¥–µ—Ñ–µ–∫—Ç—ã;  
- –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã (–Ω–æ–≤—ã–π, –≤ —Ä–∞–±–æ—Ç–µ, –ø—Ä–æ–≤–µ—Ä–∫–∞, –∑–∞–∫—Ä—ã—Ç);  
- –ø—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å —Ñ–∞–π–ª—ã –∏ –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏;  
- —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–æ–ª—è–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

---

##  –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –û–±–ª–∞—Å—Ç—å      | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ |
|---------------|-------------|
| **Frontend**  | Next.js 15 (App Router, TypeScript), React Hooks, Zustand, TailwindCSS |
| **Backend**   | Node.js, Express, TypeORM, PostgreSQL, JWT, Argon2 |
| **DevOps**    | Docker, Docker Compose, Adminer (GUI –¥–ª—è –ë–î) |
| **–ü—Ä–æ—á–µ–µ**    | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ |

---

##  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Defect_comp/
‚îÇ
‚îú‚îÄ‚îÄ backend/              # –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (Node + TypeORM)
‚îÇ   ‚îú‚îÄ‚îÄ src/              # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ seed/seed.js      # –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ä–æ–ª–µ–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin
‚îÇ   ‚îú‚îÄ‚îÄ db-init.sql       # SQL-—Å—Ö–µ–º–∞ –¥–ª—è PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile        # –°–±–æ—Ä–∫–∞ backend-—Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ .env.example      # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ frontend/             # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (Next.js)
‚îÇ   ‚îú‚îÄ‚îÄ src/              # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile        # –°–±–æ—Ä–∫–∞ frontend-—Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ next.config.ts    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml    # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
```

---

##  –°–µ—Ä–≤–∏—Å—ã Docker Compose

| –°–µ—Ä–≤–∏—Å      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü–æ—Ä—Ç |
|-------------|------------|------|
| üêò **db**       | PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | `5432` |
| üîß **seed**     | –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —Å–æ–∑–¥–∞—ë—Ç —Ä–æ–ª–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `admin@gmail.com / 1234` | ‚Äî |
| üñ• **backend**  | Node.js API —Å–µ—Ä–≤–µ—Ä | `4000` |
| üíª **frontend** | Next.js –∫–ª–∏–µ–Ω—Ç | `3000` |
| üóÑ **adminer**  | –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î | `8080` |

---

##  –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Docker** + **Docker Compose**  
- **Git** (–¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞)  
- *(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)* Node.js, –µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ Docker

---

##  –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (—á–µ—Ä–µ–∑ Docker)

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/<yourname>/Defect_comp.git
cd Defect_comp
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:
```bash
docker compose up -d --build
```

### 3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ:
- —Å–æ–∑–¥–∞—ë—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü—ã (`db-init.sql`);
- –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `seed.js` (—Å–æ–∑–¥–∞—ë—Ç —Ä–æ–ª–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞);
- –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è backend –∏ frontend.

### 4. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

| –°–µ—Ä–≤–∏—Å | URL |
|--------|-----|
| üåê Frontend | http://localhost:3000 |
| ‚öôÔ∏è Backend API | http://localhost:4000 |


### 5. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É:
```
Email: admin@gmail.com
–ü–∞—Ä–æ–ª—å: 1234
```

---



## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker

### 1. –°–æ–∑–¥–∞–π—Ç–µ PostgreSQL –±–∞–∑—É:
```sql
CREATE USER devuser WITH PASSWORD 'StrongPass123';
CREATE DATABASE defect_db OWNER devuser;
CREATE SCHEMA app AUTHORIZATION devuser;
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env`:
```ini
DB_URL=postgres://devuser:StrongPass123@localhost:5432/defect_db
PORT=4000
JWT_SECRET=somesecret
JWT_EXPIRES=3h
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ backend –∏ frontend:
```bash
# Backend
cd backend
npm install
npm run db:seed
npm run dev

# Frontend (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd frontend
npm install
npm run dev
```

### 4. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000

---

##  –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

| –†–æ–ª—å | –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ |
|------|---------------|
| **Admin** | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –ø—Ä–æ–µ–∫—Ç–∞–º–∏, –¥–µ—Ñ–µ–∫—Ç–∞–º–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —ç–∫—Å–ø–æ—Ä—Ç |
| **Lead** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–∫—Ä–æ–º–µ Admin), –ø—Ä–æ–µ–∫—Ç–∞–º–∏, –¥–µ—Ñ–µ–∫—Ç–∞–º–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —ç–∫—Å–ø–æ—Ä—Ç |
| **Manager** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –¥–µ—Ñ–µ–∫—Ç–∞–º–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —ç–∫—Å–ø–æ—Ä—Ç |
| **Engineer** | –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ñ–µ–∫—Ç–æ–≤, –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞) |

---

## API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ backend, Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

**http://localhost:4000/api-docs**

---

##  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ —Å—Ö–µ–º–µ `app`:

| –¢–∞–±–ª–∏—Ü–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `users` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã |
| `roles` | –†–æ–ª–∏ (Admin, Lead, Manager, Engineer) |
| `user_roles` | –°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–µ–π (–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º) |
| `projects` | –ü—Ä–æ–µ–∫—Ç—ã |
| `defects` | –î–µ—Ñ–µ–∫—Ç—ã (–∑–∞–¥–∞—á–∏, –æ—à–∏–±–∫–∏) |
| `comments` | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –¥–µ—Ñ–µ–∫—Ç–∞–º |
| `attachments` | –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã |
| `stages` | –°—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Backend (`.env`):
```ini
DB_URL=postgres://devuser:StrongPass123@db:5432/defect_db
PORT=4000
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES=24h
```

### Frontend (`.env.local`):
```ini
NEXT_PUBLIC_API_URL=http://localhost:4000
```



## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: `Error: connect ECONNREFUSED 127.0.0.1:5432`
**–†–µ—à–µ–Ω–∏–µ:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `db` —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
docker compose ps
docker compose logs db
```

### –ü—Ä–æ–±–ª–µ–º–∞: `Port 3000 is already in use`
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `docker-compose.yml` –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å:
```bash
# Windows
netstat -ano | findstr :3000
taskkill /PID <PID> /F

# Linux/Mac
lsof -ti:3000 | xargs kill -9
```

### –ü—Ä–æ–±–ª–µ–º–∞: `Frontend –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Backend`
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `NEXT_PUBLIC_API_URL` –≤ `.env.local`:
```ini
NEXT_PUBLIC_API_URL=http://localhost:4000
```

### –ü—Ä–æ–±–ª–µ–º–∞: `Seed –Ω–µ —Å–æ–∑–¥–∞–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞`
**–†–µ—à–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ seed –≤—Ä—É—á–Ω—É—é:
```bash
docker compose run --rm seed node seed/seed.js
```

